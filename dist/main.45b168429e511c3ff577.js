(()=>{"use strict";const t=[1,1,1,1,1,1,1,1,1,0,1,0,0,0,0,1,1,0,1,0,0,0,0,1,1,0,1,0,0,0,0,1,1,0,0,0,0,0,0,1,1,0,0,0,0,1,0,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1];(()=>{const t=document.getElementById("display"),e=document.createElement("div");e.style.width="1024px",e.style.height="512px",e.style.backgroundColor="rgb(41 41 41)",e.id="canvas",t.appendChild(e)})();const e=(()=>{let e=300,o=300,l=0,s=0,n=0;const a=(t,e,o,l,s,n)=>{const a=document.getElementById("player"),d=s,y=o-t,r=l-e,f=Math.sqrt(y**2+r**2);d.style.width=`${f}px`;const i=a.offsetLeft+a.offsetWidth/2,c=a.offsetTop+a.offsetHeight/2,h=i+f/2*Math.cos(n),p=c+f/2*Math.sin(n);d.style.top=p-d.offsetHeight/2+"px",d.style.left=h-d.offsetWidth/2+"px",d.style.transform=`rotate(${n}rad)`},d=()=>{const l=.0174533,s=document.getElementsByClassName("line");let d=n-30*l;for(let n=0;n<60;n++){let y=e,r=o;for(;!t[8*Math.floor(r/64)+Math.floor(y/64)];)y+=Math.cos(d),r+=Math.sin(d);a(e,o,y,r,s[n],d),d+=l}};return{drawPlayer:()=>{const t=document.getElementById("canvas"),l=document.createElement("div");l.style.position="relative",l.style.width="8px",l.style.height="8px",l.style.top=`${o}px`,l.style.left=`${e}px`,l.style.backgroundColor="yellow",l.style.zIndex="10",l.id="player";const s=document.createElement("div");s.style.width="2px",s.style.height="12px",s.style.backgroundColor="yellow",s.style.position="absolute",s.style.transform="translateX(-50%)",s.style.zIndex="11",s.id="faceLine";const a=o-2,d=e+4+10*Math.cos(n),y=a+10*Math.sin(n);s.style.top=`${y}px`,s.style.left=`${d}px`,s.style.transform=`rotate(${n+1.5708}rad)`,t.appendChild(s);for(let e=0;e<60;e++){const e=document.createElement("div");e.style.position="absolute",e.style.zIndex="10",e.style.height="1px",e.style.width="0px",e.style.backgroundColor="green",e.classList.add("line"),t.appendChild(e)}t.appendChild(l)},movePlayer:()=>{document.addEventListener("keydown",(a=>{let y=e,r=o;"KeyW"===a.code&&(y+=l,r+=s),"KeyS"===a.code&&(y-=l,r-=s),"KeyA"===a.code&&(n-=.1,n<0&&(n+=2*Math.PI),l=5*Math.cos(n),s=5*Math.sin(n)),"KeyD"===a.code&&(n+=.1,n>2*Math.PI&&(n-=2*Math.PI),l=5*Math.cos(n),s=5*Math.sin(n));const f=Math.floor((y+8)/64),i=Math.floor((r+8)/64),c=Math.floor(y/64),h=Math.floor(r/64),p=document.getElementById("player");0===t[8*h+c]&&0===t[8*i+f]&&(e=y,o=r,p.style.top=`${o}px`,p.style.left=`${e}px`);const m=p.offsetLeft+p.offsetWidth/2,x=p.offsetTop+p.offsetHeight/2,g=m+10*Math.cos(n),u=x+10*Math.sin(n),M=document.getElementById("faceLine");M.style.top=u-M.offsetHeight/2+"px",M.style.left=g-M.offsetWidth/2+"px",M.style.transform=`rotate(${n+1.5708}rad)`,d()}))}}})();e.drawPlayer(),e.movePlayer();(()=>{let e,o;for(let l=0;l<8;l++)for(let s=0;s<8;s++){let n="#000000";1===t[8*s+l]&&(n="#ffffff"),e=64*s,o=64*l;const a=document.getElementById("canvas"),d=document.createElement("div");d.style.width="64px",d.style.height="64px",d.style.backgroundColor=n,d.style.position="absolute",d.style.top=`${e}px`,d.style.left=`${o}px`,a.appendChild(d)}})()})();